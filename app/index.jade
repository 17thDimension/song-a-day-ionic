doctype html
html
  head
    meta(charset='utf-8')
    meta(name='viewport', content='initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, width=device-width, minimal-ui')
    title Song A Day
    meta(name="apple-mobile-web-app-capable" content="yes")
    meta(name="apple-mobile-web-app-status-bar-style" content="white-translucent")

    link(href='css/app.css?v=#{GLOBALS.DEPLOY_TIME}', rel='stylesheet')
    meta(property='og:title', content='Song A Day')
    meta(property='og:type', content='website')
    meta(property='og:image', content='http://songadays.com/img/song-a-day.png')
    meta(property='og:description', content='a Song a Day is fun to play')
    link(rel="icon", type="image/png", href="img/favicon.png")
    link(rel="apple-touch-icon", href="img/favicon.png" )

    //- notify about all errors
    -if (GLOBALS.ROLLBAR_CLIENT_ACCESS_TOKEN)
      script(type="text/javascript").
        var _rollbarConfig = {
            accessToken: "#{GLOBALS.ROLLBAR_CLIENT_ACCESS_TOKEN}",
            captureUncaught: true,
            payload: {
              environment: "#{GLOBALS.ENV}",
              client: {
                javascript: {
                  source_map_enabled: true,
                  code_version: "#{GLOBALS.CODE_VERSION}",
                  // Optionally have Rollbar guess which frames the error was thrown from
                  // when the browser does not provide line and column numbers.
                  guess_uncaught_frames: true
                }
              }
            }
        };
      script(src="js/rollbar.js")

    //- Add google analytics, if available.
    //- NOTE: to make it work on Cordova,
    //-   you will also need angulartics and cordova google-analytics-plugin.
    -if (GLOBALS.GOOGLE_ANALYTICS_ID)
      script(type="text/javascript").
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '#{GLOBALS.GOOGLE_ANALYTICS_ID}', '#{GLOBALS.GOOGLE_ANALYTICS_HOST}');

    //- define required JS GLOBALS
    script.
      GLOBALS = !{JSON.stringify(GLOBALS)};

    script(src="js/vendor.js?v=#{GLOBALS.DEPLOY_TIME}")
    script(src="js/app_templates.js?v=#{GLOBALS.DEPLOY_TIME}")
    script(src="js/app.js?v=#{GLOBALS.DEPLOY_TIME}")

    //-script(id="cordova-js" src="cordova.js")
    //- If you need to include any cordova plugins' js files, add them here:
    //- script(id="cdv-plugin-fb-connect-js" src="cdv-plugin-fb-connect.js")

  body(ng-controller='AppCtrl as ctrl',ng-cloak)
    
    
    videogular.cinema(vg-player-ready="ctrl.onPlayerReady($API)",vg-complete='ctrl.next()')
      vg-media(vg-use-native-controls='true',vg-src='ctrl.config.sources',vg-type="video",vg-auto-play='true')              
      progress(max='{{ctrl.API.totalTime}}',value="{{ctrl.API.currentTime}}").song-position 
      canvas#visualizer(width='1000',height='200')
      
    ion-nav-view

    ion-footer-bar(align-title="center")
      .buttons.left(ng-show='ctrl.playlist.length')
        button.button.button-icon.icon.ion-music-note(ng-click="toggleLeft()")
        button.button.button-light.song-title(ng-bind='ctrl.nowPlaying.title',ng-click='showSong(ctrl.nowPlaying)')   
        //-button(ng-click='ctrl.API.toggleFullScreen()',ng-show='ctrl.playlist.length').when-large.button.button-icon.ion-arrow-expand
      .title
        a.button.button-icon.ion-button.ion-mic-c(href='#/record')
      .buttons.right(ng-show='ctrl.playlist.length')
        button.button.button-light.song-alias(ng-bind='ctrl.nowPlaying.artist.alias',ng-click='showArtist(ctrl.nowPlaying.artist.key)')
          
    
